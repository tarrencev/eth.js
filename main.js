import Eth from './src';

const client = new Eth('http://localhost:8543');

const contractCode = "606060405260405161062f38038061062f833981016040528051018060026000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10609357805160ff19168380011785555b50607d9291505b8082111560c05760008155600101606b565b505060006004555061056b806100c46000396000f35b828001600101855582156064579182015b82811115606457825182600050559160200191906001019060a4565b5090566060604052361561006c5760e060020a6000350463127cae37811461006e5780631dfbae6e146100955780633cfa7e0114610171578063618ff87f1461017a5780638043c9c0146101ab5780638da5cb5b14610204578063b948348c14610216578063bb7edfc114610296575b005b6005602052600435600090815260409020805460018201546002929092015461029f929083565b6102b060043560018054829081101561000257506000527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf66005909102908101547fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf78201547fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf88301547fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf98401547fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfa909401549293919290919085565b6102cc60005481565b61006c6004356024356044356064356003546000908190600160a060020a0390811633919091161461037757610002565b6102d6600280546020601f6001831615610100026000190190921683900491820181900402608090810160405260608281529291908282801561036f5780601f106103445761010080835404028352916020019161036f565b6102cc600354600160a060020a031681565b6004805460018082018355805461006c93359291600091829190859081101561000257508152600584027fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfa8101547fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6909101925081141561049057610002565b6102cc60045481565b606092835260809190915260a05280f35b606094855260809390935260a091825260c05260e09190915290f35b6060908152602090f35b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600302600f01f150905090810190601f1680156103365780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b820191906000526020600020905b81548152906001019060200180831161035257829003601f168201915b505050505081565b600180548082018083559091908280158290116103d6576005028160050283600052602060002091820191016103d691905b8082111561048c5786815580850187815560028201889055600382018890556004919091018790556103a9565b50505091506001600050828154811015610002579060005260206000209060050201600050905085816000016000508190555084816001016000508190555083816002016000508190555082816003016000508190555060018160040160005081905550806001600050838154811015610002575050506060868152608086815260a086905260c08590527fb3a13653eaf692115e04277b4fbb4289a9dd3f866d525816f212cec858a52ed691a1505050505050565b5090565b815481141561049e57610002565b42826003016000505410156104b257610002565b6001826000016000828282505403925050819055506005600050600033600160a060020a03168152602001908152602001600020600050905082816000016000508190555081600201600050548160010160005081905550816001016000505481600201600050819055507fcc77e12e39011f372988dfcb0d05684176a6d7f5066ba501ce2b56bb0a543e1584336040518083815260200182600160a060020a031681526020019250505060405180910390a15050505056";
const abi = [{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"purchasedTickets","outputs":[{"name":"id","type":"uint256"},{"name":"eventTime","type":"uint256"},{"name":"price","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"availableTicketTypes","outputs":[{"name":"quantityAvailable","type":"uint256"},{"name":"price","type":"uint256"},{"name":"eventTime","type":"uint256"},{"name":"saleStartTime","type":"uint256"},{"name":"exists","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"availableTickets","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":false,"inputs":[{"name":"_quantityAvailable","type":"uint256"},{"name":"_price","type":"uint256"},{"name":"_eventTime","type":"uint256"},{"name":"_saleStartTime","type":"uint256"}],"name":"createTicketType","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"eventName","outputs":[{"name":"","type":"string"}],"type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[{"name":"_ticketTypeId","type":"uint256"}],"name":"purchaseTicket","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"numTicketsAllocated","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"inputs":[{"name":"_eventName","type":"string"}],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"quantityAvailable","type":"uint256"},{"indexed":false,"name":"price","type":"uint256"},{"indexed":false,"name":"eventTime","type":"uint256"},{"indexed":false,"name":"saleStartTime","type":"uint256"}],"name":"TicketTypeCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"ticketType","type":"uint256"},{"indexed":false,"name":"owner","type":"address"}],"name":"TicketAllocated","type":"event"}];

// client.send('eth_coinbase').then(res => console.log(res), err => console.error(err));
// const contract = client.contracts.create(abi, {
//     from: '0xe0743179eaeb698e5e738ec388b0e44fbda8a492',
//     data: contractCode,
//     gas: 1000000,
// }).subscribe(res => console.log(res), err => console.error(err));

const contract = client.contracts.at(abi, '0x2983748ec0b8bd47bbd20e34d40584055a6b10a9');

// console.log(contract);
contract.createTicketType(10, 10, 10, 10).subscribe(res => console.log(res), err => console.error(err));

